<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Details - The Renfrew County Amateur Radio Club</title>
    <link rel="stylesheet" href="globals.css">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QRZJ62CCZR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QRZJ62CCZR');
</script>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header role="banner">
        <div class="header-container">
            <a href="/" class="logo" aria-label="Home">
                <img src="img/rcarclogo.svg" alt="RCARC Logo" class="logo-image">
            </a>
            
            <nav class="main-nav" role="navigation" aria-label="Main navigation">
                <ul class="nav-list">
                    <li><a href="index.html" class="nav-link">HOME</a></li>
                    <li class="nav-dropdown">
                        <a href="about.html" class="nav-link">ABOUT</a>
                        <ul class="dropdown-menu">
                            <li><a href="about.html">About RCARC</a></li>
                            <li><a href="get-started.html">Getting Started</a></li>
                        </ul>
                    </li>
                    <li><a href="history.html" class="nav-link">HISTORY</a></li>
                    <li><a href="events.html" class="nav-link active">EVENTS</a></li>
                    <li><a href="gallery.php" class="nav-link ">GALLERY</a></li>
                    <li><a href="contact.html" class="nav-link">CONTACT</a></li>
                </ul>
                <a href="get-licensed.html" class="license-button">GET LICENSED</a>
                <button id="hamburger-menu" class="hamburger-menu" aria-label="Toggle menu" aria-expanded="false">
                    <span class="menu-text">Menu</span>
                </button>
            </nav>
        </div>
        <div class="membership-banner" role="status" aria-live="polite">
            <p>New membership fees starting January 1, 2026 &ndash; $35 for Individual, $50 for a family.</p>
        </div>
    </header>

    <div class="hero" role="img" aria-label="Map of Renfrew County">
        <img src="img/renfrew.jpg" alt="Renfrew County Map" class="hero-image">
    </div>

    <main id="main-content" class="about-content" role="main">
        <div class="about-section" role="region" aria-labelledby="events-intro-heading">
            <div class="about-text">
                <h1 id="events-intro-heading">Event Details</h1>
                <p>The Renfrew County Amateur Radio Club hosts regular events throughout the year. Check out the details of our upcoming events below, including location information, special notes, and links to related resources.</p>
            </div>
            <div class="join-button-container">
                <button onclick="openModal()" class="join-button" aria-haspopup="dialog">JOIN THE CLUB!</button>
            </div>
        </div>

        <div class="info-container">
            <section class="events-section" role="region" aria-labelledby="upcoming-events-heading">
                <h2 id="upcoming-events-heading">UPCOMING EVENTS</h2>
                <div class="dotted-line" aria-hidden="true"></div>
                <div class="events-list" role="list">
                    <!-- Events will be populated here automatically by events-details.js -->
                </div>
            </section>

            <section class="events-section" role="region" aria-labelledby="calendar-heading">
                <h2 id="calendar-heading">EVENT CALENDAR</h2>
                <div class="dotted-line" aria-hidden="true"></div>
                <div class="calendar-container" role="application" aria-label="Event calendar">
                    <!-- Calendar will be inserted here by JavaScript -->
                </div>
                <div class="calendar-info">
                    <p>Our events follow a regular schedule:</p>
                    <ul class="event-schedule" role="list">
                        <li role="listitem"><strong>Club Breakfast:</strong> Alternates between Deep River and Pembroke locations on the second Saturday of each month at 9:30AM</li>
                        <li role="listitem"><strong>Club Meeting:</strong> Held at the Petawawa Civic Centre on the third Sunday of each month at 1PM</li>
                        <li role="listitem"><strong>Techie Night:</strong> Online via Zoom on the second and fourth Thursday of each month at 7:30PM</li>
                    </ul>
                </div>
            </section>
        </div>
       
        <section id="youTube" class="youTubeVideos" role="region" aria-labelledby="youtube-heading">
            <h1 id="youtube-heading">RCARC YouTube Videos</h1>
            <div id="videoContainer" class="video-grid" role="list">
                <!-- Videos will be populated here by JavaScript -->
            </div>
        </section>

        <!-- The Modal -->
        <div id="membershipModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" hidden>
            <div class="modal-content">
                <button class="close" onclick="closeModal()" aria-label="Close dialog">&times;</button>
                <h2 id="modal-title">Membership Application</h2>
                <p>Thanks for your interest in our club! Becoming a member is simple and helps to support our projects and repeaters. <br>Membership is $35 yearly for an individual, or $50 per household. Membership dues can be e-transferred to renfrewcountyarc@gmail.com</p>
                <form id="membershipForm" role="form">
                    <div class="form-group">
                        <label for="name" id="name-label">Full Name *</label>
                        <input type="text" id="name" required aria-required="true" aria-labelledby="name-label">
                    </div>

                    <div class="form-group">
                        <label for="email" id="email-label">Email Address *</label>
                        <input type="email" id="email" required aria-required="true" aria-labelledby="email-label">
                    </div>

                    <div class="form-group">
                        <label for="callsign" id="callsign-label">Callsign</label>
                        <input type="text" id="callsign" aria-labelledby="callsign-label">
                    </div>

                    <div class="form-group">
                        <label for="phone" id="phone-label">Phone Number</label>
                        <input type="tel" id="phone" aria-labelledby="phone-label">
                    </div>

                    <div class="form-group">
                        <label for="address" id="address-label">Address</label>
                        <textarea id="address" rows="3" aria-labelledby="address-label"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="interests" id="interests-label">Interests</label>
                        <textarea id="interests" rows="3" aria-labelledby="interests-label"></textarea>
                    </div>

                    <button type="submit" class="submit-button" aria-label="Submit application">
                        Submit Application
                        <div class="spinner" aria-hidden="true"></div>
                    </button>
                    <div id="formMessage" class="form-message" role="alert" aria-live="polite"></div>
                </form>
            </div>
        </div>
       
    </main>
    <footer role="contentinfo">
        <div class="footer-content">
            <p>&copy; 2025 Renfrew County Amateur Radio Club. All rights reserved.</p>
            <p class="egg"><a href="morse.html" aria-label="Morse code easter egg">-.-. .--</a></p>
        </div>
    </footer>
    <script src="events-details.js"></script>
    <script src="jointheclub.js"></script>
    <script src="event-calendar.js"></script>
    <script>
        const MAX_YOUTUBE_RESULTS = 12;

        document.addEventListener('DOMContentLoaded', function() {
            const hamburger = document.getElementById('hamburger-menu');
            const navList = document.querySelector('.nav-list');
            
            // Check if we're on mobile
            function isMobile() {
                return window.innerWidth <= 768;
            }
            
            // Setup mobile menu
            function setupMobileMenu() {
                // Clean up any existing mobile-specific elements
                const existingMobileItems = document.querySelectorAll('.mobile-only');
                existingMobileItems.forEach(item => item.remove());
                
                // Add "Get Started" as a separate menu item in mobile view
                if (isMobile()) {
                    // Create a new list item for Get Started
                    const getStartedItem = document.createElement('li');
                    getStartedItem.className = 'mobile-only';
                    getStartedItem.innerHTML = '<a href="get-started.html" class="nav-link">GET STARTED</a>';
                    
                    // Create a new list item for Get Licensed 
                    const getLicensedItem = document.createElement('li');
                    getLicensedItem.className = 'mobile-only';
                    getLicensedItem.innerHTML = '<a href="get-licensed.html" class="nav-link">GET LICENSED</a>';
                    
                    // Insert after the ABOUT item
                    const aboutItem = document.querySelector('.nav-dropdown');
                    if (aboutItem && aboutItem.nextSibling) {
                        navList.insertBefore(getStartedItem, aboutItem.nextSibling);
                        navList.appendChild(getLicensedItem);
                    }
                }
            }
            
            // Toggle mobile menu
            hamburger.addEventListener('click', function() {
                navList.classList.toggle('show');
                setupMobileMenu();
            });
            
            // Handle window resize
            window.addEventListener('resize', function() {
                if (!isMobile()) {
                    navList.classList.remove('show');
                }
            });
            
            // Initial setup
            setupMobileMenu();
            fetchYouTubeVideos();
        });

        function fetchYouTubeVideos() {
            const container = document.getElementById('videoContainer');
            if (!container) return;

            container.innerHTML = '<p class="video-status">Loading the latest videos&hellip;</p>';

            const params = new URLSearchParams({
                maxResults: MAX_YOUTUBE_RESULTS
            });

            fetch(`youtube-rss.php?${params.toString()}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`YouTube API error: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (!data.items || data.items.length === 0) {
                        container.innerHTML = '<p class="video-status">No videos available right now. Please check back soon.</p>';
                        return;
                    }
                    container.innerHTML = '';
                    displayVideos(data.items);
                })
                .catch(error => {
                    console.error('Error fetching YouTube videos:', error);
                    container.innerHTML = '<p class="video-status">Unable to load videos at the moment. Please try again later.</p>';
                });
        }

        // Update your video card creation in the displayVideos function
        function displayVideos(videos) {
            const container = document.getElementById('videoContainer');
            if (!container) return;
            
            const fragment = document.createDocumentFragment();
            
            videos.forEach(video => {
                if (video.id.videoId) {
                    const videoCard = document.createElement('div');
                    videoCard.className = 'video-card';
                    videoCard.setAttribute('role', 'listitem');

                    const publishDate = new Date(video.snippet.publishedAt).toLocaleDateString();

                    const thumbnailUrl = video.snippet.thumbnails.high?.url || video.snippet.thumbnails.medium?.url || '';

                    videoCard.innerHTML = `
                        <a href="https://www.youtube.com/watch?v=${video.id.videoId}"
                           target="_blank"
                           aria-label="Watch ${video.snippet.title} (opens in new tab)">
                            <img class="video-thumbnail"
                                 src="${thumbnailUrl}"
                                 alt="${video.snippet.title}">
                        </a>
                        <div class="video-info">
                            <div class="video-title">${video.snippet.title}</div>
                            <div class="video-date" aria-label="Published on ${publishDate}">Published: ${publishDate}</div>
                        </div>
                    `;

                    fragment.appendChild(videoCard);
                }
            });

            container.appendChild(fragment);
        }
    </script>
</body>
</html>
